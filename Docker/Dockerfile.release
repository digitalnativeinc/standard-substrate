ARG RUNTIME_IMAGE=ubuntu:focal

FROM $RUNTIME_IMAGE as runtime

LABEL maintainer="Standard Tech <tech@standard.tech>"
LABEL description="Standard Tech Opportunity Node"

COPY ./opportunity-standalone /usr/local/bin
COPY ./Docker/entrypoint.sh /

EXPOSE 30333 9933 9944
VOLUME ["/data"]

RUN ldd /usr/local/bin/opportunity-standalone && \
	/usr/local/bin/opportunity-standalone --version

ENTRYPOINT ["/entrypoint.sh", "/usr/local/bin/opportunity-standalone"]
CMD ["--help"]